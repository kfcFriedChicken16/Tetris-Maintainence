<?import com.comp2042.GameOverPanel?>
<?import com.comp2042.PausePanel?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.media.MediaView?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>
<StackPane fx:controller="com.comp2042.GuiController"
      xmlns:fx="http://javafx.com/fxml">
    
    <!-- Background Video (Bottom Layer) -->
    <MediaView fx:id="gameplayBackgroundVideo" preserveRatio="false" 
               StackPane.alignment="CENTER"/>
    
    <!-- Dark Overlay (Middle Layer - to darken the video with vignette effect) -->
    <Region fx:id="gameplayVideoOverlay" styleClass="gameplay-video-overlay" 
            StackPane.alignment="CENTER"/>
    
    <!-- Game Content (Top Layer) -->
    <Pane>
        <GridPane fx:id="brickPanel" vgap="1" hgap="1"/>
        <GridPane fx:id="ghostPanel" vgap="1" hgap="1"/>
        <BorderPane styleClass="gameBoard" fx:id="gameBoard">
            <center>
                <GridPane fx:id="gamePanel" hgap="1" vgap="1" layoutY="30" layoutX="40"/>
            </center>
        </BorderPane>

    <Group fx:id="groupNotification">
        <VBox alignment="CENTER">
            <GameOverPanel fx:id="gameOverPanel"/>
        </VBox>
    </Group>
    
    <!-- Pause Menu Panel -->
    <Group fx:id="pauseGroup">
        <VBox alignment="CENTER">
            <PausePanel fx:id="pausePanel"/>
        </VBox>
    </Group>
    
    <!-- Back to Menu Button -->
    <Button fx:id="backToMenuBtn" text="Back to Menu" onAction="#backToMenu" 
            layoutX="10" layoutY="10" styleClass="back-menu-button">
    </Button>
    
    <!-- Score Display -->
    <VBox layoutX="220" layoutY="10" spacing="5">
        <Label text="HIGHEST SCORE" styleClass="score-label"/>
        <Label fx:id="highestScoreLabel" text="0" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="CURRENT SCORE" styleClass="score-label"/>
        <Label fx:id="scoreLabel" text="0" styleClass="scoreClass"/>
    </VBox>
    
    <!-- Sprint Mode Display (Hidden by default, shown only in Sprint mode) -->
    <VBox fx:id="sprintModeDisplay" layoutX="220" layoutY="150" spacing="5" visible="false" managed="false">
        <Label text="SPRINT MODE" styleClass="score-label"/>
        <Label text="LINES: " styleClass="score-label"/>
        <Label fx:id="sprintLinesLabel" text="0 / 40" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="TIME: " styleClass="score-label"/>
        <Label fx:id="sprintTimerLabel" text="00:00" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="BEST TIME: " styleClass="score-label"/>
        <Label fx:id="sprintBestTimeLabel" text="--:--" styleClass="scoreClass"/>
    </VBox>
    
    <!-- Ultra Mode Display (Hidden by default, shown only in Ultra mode) -->
    <VBox fx:id="ultraModeDisplay" layoutX="220" layoutY="150" spacing="5" visible="false" managed="false">
        <Label text="ULTRA MODE" styleClass="score-label"/>
        <Label text="TIME: " styleClass="score-label"/>
        <Label fx:id="ultraTimerLabel" text="02:00" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="SPEED LEVEL: " styleClass="score-label"/>
        <Label fx:id="ultraSpeedLevelLabel" text="1" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="BEST SCORE: " styleClass="score-label"/>
        <Label fx:id="ultraBestScoreLabel" text="0" styleClass="scoreClass"/>
    </VBox>
    
    <!-- Survival Mode Display (Hidden by default, shown only in Survival mode) -->
    <VBox fx:id="survivalModeDisplay" layoutX="220" layoutY="150" spacing="5" visible="false" managed="false">
        <Label text="SURVIVAL MODE" styleClass="score-label"/>
        <Label text="SPEED LEVEL: " styleClass="score-label"/>
        <Label fx:id="survivalSpeedLevelLabel" text="1" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="NEXT SPEED UP: " styleClass="score-label"/>
        <Label fx:id="survivalNextThresholdLabel" text="1500" styleClass="scoreClass"/>
        <Region prefHeight="10" maxHeight="10" minHeight="10"/>
        <Label text="HIGHEST LEVEL: " styleClass="score-label"/>
        <Label fx:id="survivalHighestLevelLabel" text="1" styleClass="scoreClass"/>
    </VBox>
    
    <!-- HOLD Panel (Left Side) -->
    <VBox fx:id="holdPanelVBox" layoutX="40" layoutY="60" spacing="10" alignment="TOP_CENTER">
        <Label text="HOLD" styleClass="panel-label"/>
        <VBox fx:id="holdPieceContainer" spacing="15" alignment="TOP_CENTER" prefWidth="100" prefHeight="100"/>
    </VBox>
    
    <!-- NEXT Panel (Right Side) -->
    <VBox fx:id="nextPanelVBox" layoutX="620" layoutY="60" spacing="10" alignment="TOP_CENTER">
        <Label text="NEXT" styleClass="panel-label"/>
        <VBox fx:id="nextPiecesContainer" spacing="15" alignment="TOP_CENTER"/>
    </VBox>
    
    </Pane>
    
    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</StackPane>